webpackJsonp([13],{133:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r(173),n=r(201),o=r(0),a=o(s.a,n.a,!1,null,null,null);a.options.__file="src\\views\\user\\regist.vue",t.default=a.exports},147:function(e,t,r){"use strict";t.a={props:["title","router","h1","btn_text"],methods:{change_router:function(){this.$router.push({name:this.router})}}}},154:function(e,t,r){"use strict";var s=r(147),n=r(155),o=r(0),a=o(s.a,n.a,!1,null,null,null);a.options.__file="src\\views\\user\\user-components\\layout.vue",t.a=a.exports},155:function(e,t,r){"use strict";var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Card",{staticStyle:{width:"800px",height:"500px",margin:"50px auto"},attrs:{padding:30}},[r("Row",[r("Col",{staticStyle:{padding:"0 80px"},attrs:{span:"16"}},[r("Menu",{attrs:{mode:"horizontal",theme:"light","active-name":"1"}},[r("MenuItem",{attrs:{name:"1"}},[r("Icon",{attrs:{type:"ios-eamil"}}),e._v("\n\t\t\t            "+e._s(e.title)+"\n\t\t\t        ")],1)],1),e._v(" "),e._t("form")],2),e._v(" "),r("Col",{staticStyle:{"margin-top":"50px",padding:"150px 30px","border-left":"1px solid #dddee1"},attrs:{span:"8"}},[r("p",[e._v(e._s(e.h1))]),e._v(" "),r("Button",{attrs:{type:"text"},on:{click:e.change_router}},[e._v(e._s(e.btn_text))])],1)],1)],1)},n=[];s._withStripped=!0;var o={render:s,staticRenderFns:n};t.a=o},173:function(e,t,r){"use strict";var s=r(4),n=r(50),o=r.n(n),a=r(154);t.a={components:{layout:a.a},data:function(){return{userForm:{user_name:"",user_sex:"",user_psd:"",code:"",user_sid:[12,"448"]},timer:null,schoolData:[],gettingIdentifyCodeBtnContent:"获取验证码",identifyCodeRight:!1,hasGetIdentifyCode:!1,canGetIdentifyCode:!1,ruleInline:{user_name:[{required:!0,message:"输入手机号码/邮箱",trigger:"blur"}],user_psd:[{validator:function(e,t,r){t.length<6||t.length>10?r(new Error("请输入6-10位密码")):/^[a-z0-9_-]{6,10}$/.test(t)?r():r(new Error("（只能包含数字字母_）"))},trigger:"blur"}],code:[{required:!0,min:6,max:6,message:"请输入6位验证码",trigger:"blur"}],user_sex:[{required:!0,type:"string",message:"请选择性别",trigger:"change"}],user_sid:[{required:!0,type:"array",message:"请选择学校",trigger:"change"}]}}},created:function(){this.init()},methods:{handleSubmit:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var r=s.a.cloneObj(t.userForm);r.user_sid=t.userForm.user_sid[1],r.user_psd=o()(t.userForm.user_psd),t.$fetch.user.regist(r).then(function(e){200===e.code?(t.$Message.info(e.msg),t.$router.push({name:"login"})):t.$Message.error(e.msg)})}else t.$Message.error("请填写正确表单")})},getIdentifyCode:function(){var e=this;this.hasGetIdentifyCode=!0,this.canGetIdentifyCode=!0;var t=60;this.timer=setInterval(function(){t>=0?(e.gettingIdentifyCodeBtnContent=t+"秒后重试",t-=1):e.canGetCode()},1e3),this.$fetch.user.getCode({username:this.userForm.user_name,is_exist:0}).then(function(t){200===t.code?e.$Message.info(t.msg):(e.canGetCode(),e.$Message.error(t.msg))}).catch(function(t){e.canGetCode()})},canGetCode:function(){clearInterval(this.timer),this.gettingIdentifyCodeBtnContent="获取验证码",this.canGetIdentifyCode=!1},init:function(){this.schoolData=s.a.getSchool()}}}},201:function(e,t,r){"use strict";var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("layout",{attrs:{title:"用户注册",router:"login",h1:"已有二货账号",btn_text:"立即登录"}},[r("Form",{ref:"userForm",staticStyle:{padding:"30px 0"},attrs:{slot:"form",model:e.userForm,"label-width":80,rules:e.ruleInline},slot:"form"},[r("FormItem",{attrs:{label:"手机 / 邮箱",prop:"user_name"}},[r("Input",{attrs:{placeholder:"请输入您的手机号码或邮箱..."},model:{value:e.userForm.user_name,callback:function(t){e.$set(e.userForm,"user_name",t)},expression:"userForm.user_name"}})],1),e._v(" "),r("FormItem",{attrs:{label:"验证码",prop:"code"}},[r("div",{staticStyle:{display:"inline-block",width:"154px"}},[r("Input",{attrs:{placeholder:"请输入6位验证码..."},model:{value:e.userForm.code,callback:function(t){e.$set(e.userForm,"code",t)},expression:"userForm.code"}})],1),e._v(" "),r("div",{staticStyle:{display:"inline-block",position:"relative"}},[r("Button",{attrs:{disabled:e.canGetIdentifyCode},on:{click:e.getIdentifyCode}},[e._v(e._s(e.gettingIdentifyCodeBtnContent))])],1)]),e._v(" "),r("FormItem",{attrs:{label:"密码",prop:"user_psd"}},[r("Input",{attrs:{type:"password",placeholder:"请输入您的密码..."},model:{value:e.userForm.user_psd,callback:function(t){e.$set(e.userForm,"user_psd",t)},expression:"userForm.user_psd"}})],1),e._v(" "),r("FormItem",{attrs:{label:"学校",prop:"user_sid"}},[r("Cascader",{attrs:{data:e.schoolData},model:{value:e.userForm.user_sid,callback:function(t){e.$set(e.userForm,"user_sid",t)},expression:"userForm.user_sid"}})],1),e._v(" "),r("FormItem",{attrs:{label:"性别",prop:"user_sex"}},[r("RadioGroup",{model:{value:e.userForm.user_sex,callback:function(t){e.$set(e.userForm,"user_sex",t)},expression:"userForm.user_sex"}},[r("Radio",{attrs:{label:"male"}},[e._v("男生")]),e._v(" "),r("Radio",{attrs:{label:"female"}},[e._v("女生")])],1)],1),e._v(" "),r("FormItem",[r("Button",{attrs:{type:"primary",long:""},on:{click:function(t){e.handleSubmit("userForm")}}},[e._v("注  册")])],1)],1),e._v(" "),r("div",{attrs:{slot:"right"},slot:"right"})],1)},n=[];s._withStripped=!0;var o={render:s,staticRenderFns:n};t.a=o}});