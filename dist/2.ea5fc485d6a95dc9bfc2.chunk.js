webpackJsonp([2],{184:function(o,e,s){"use strict";var t=s(4);e.a={data:function(){return{goods:{goods_name:"",goods_cid:null,goods_summary:"",goods_type:"0",goods_nprice:1,goods_oprice:1,goods_address:"",goods_icon:[],phone:"",qq:null,wechat:""},ruleValidate:{goods_name:[{required:!0,message:"请填写二货名称",trigger:"blur"}],goods_cid:[{required:!0,type:"number",message:"请选择分类",trigger:"blur"}],goods_type:[{required:!0,type:"number",message:"请选择交易方式",trigger:"change"}],goods_summary:[{required:!0,message:"请输入详情",trigger:"blur"},{type:"string",max:255,message:"不能超过255字符",trigger:"blur"}]},imgName:"",visible:!1,path:"",defaultList:[]}},computed:{classify:function(){return this.$store.state.app.classify},uid:function(){return this.$store.state.user.info.user_id},gid:function(){return this.$route.params.gid}},watch:{gid:function(o){o||(this.goods={})}},created:function(){this.goods.phone=this.$store.state.user.info.user_phone,this.setPath()},methods:{setPath:function(){"dev"==t.a.env?this.path="/api/goods/upload":this.path="api.erhuo.com/goods/upload"},getData:function(){var o=this;this.$fetch.goods.get_edit({goods_id:this.gid}).then(function(e){200===e.code?(o.goods=e.data,o.defaultList=e.data.goods_icon):o.$Message.error(e.msg)})},handleSubmit:function(o){var e=this;this.$refs[o].validate(function(o){o?(e.goods.goods_uid=e.uid,e.$fetch.goods.add(e.goods).then(function(o){200===o.code?(e.$Message.success("发布成功"),e.$router.push({name:"usell"})):e.$Message.error(o.msg)})):e.$Message.error("请输入正确的表单内容!")})},edit_goods:function(o){var e=this;this.$refs[o].validate(function(o){o?e.$fetch.goods.edit(e.goods).then(function(o){200===o.code?e.$Message.success(o.msg):e.$Message.error(o.msg)}):e.$Message.error("请输入正确的表单内容!")})},handleView:function(o){this.imgName=o,this.visible=!0},handleRemove:function(o){var e=this;console.log(o),this.$fetch.goods.del_img({goods_id:this.goods.goods_id,url:o.url}).then(function(s){if(200===s.code){var t=e.$refs.upload.fileList;e.goods.goods_icon.splice(t.indexOf(o),1)}else e.$Message.error(s.msg)})},handleSuccess:function(o,e){200===o.code?e.url=o.data:this.$Message.error(o.msg)},handleFormatError:function(o){this.$Notice.warning({title:"The file format is incorrect",desc:"File format of "+o.name+" is incorrect, please select jpg or png."})},handleMaxSize:function(o){this.$Notice.warning({title:"Exceeding file size limit",desc:"File  "+o.name+" is too large, no more than 2M."})},handleBeforeUpload:function(){var o=this.goods.goods_icon.length<5;return o||this.$Notice.warning({title:"Up to five pictures can be uploaded."}),o}},mounted:function(){this.goods.goods_icon=this.$refs.upload.fileList,this.gid&&this.getData()}}},218:function(o,e){},219:function(o,e,s){"use strict";var t=function(){var o=this,e=o.$createElement,s=o._self._c||e;return s("div",{staticClass:"box"},[s("Card",{staticStyle:{"text-align":"center","margin-bottom":"30px"},attrs:{"dis-hover":!0}},[o._v("发布二货")]),o._v(" "),s("Card",{attrs:{"dis-hover":!0,padding:40}},[s("Form",{ref:"goods",attrs:{model:o.goods,rules:o.ruleValidate,"label-width":80}},[s("FormItem",{attrs:{label:"二货图片",prop:"name"}},[o._l(o.goods.goods_icon,function(e){return s("div",{staticClass:"demo-upload-list"},[[s("img",{attrs:{src:e.url}}),o._v(" "),s("div",{staticClass:"demo-upload-list-cover"},[s("Icon",{attrs:{type:"ios-eye-outline"},nativeOn:{click:function(s){o.handleView(e.url)}}}),o._v(" "),s("Icon",{attrs:{type:"ios-trash-outline"},nativeOn:{click:function(s){o.handleRemove(e)}}})],1)]],2)}),o._v(" "),s("Upload",{ref:"upload",staticStyle:{display:"inline-block",width:"58px"},attrs:{"show-upload-list":!1,"on-success":o.handleSuccess,"default-file-list":o.defaultList,format:["jpg","jpeg","png"],"max-size":2048,"on-format-error":o.handleFormatError,"on-exceeded-size":o.handleMaxSize,"before-upload":o.handleBeforeUpload,name:"goods_icon",multiple:"",type:"drag",action:o.path}},[s("div",{staticStyle:{width:"58px",height:"58px","line-height":"58px"}},[s("Icon",{attrs:{type:"camera",size:"20"}})],1)]),o._v(" "),s("Modal",{attrs:{title:"查看图片"},model:{value:o.visible,callback:function(e){o.visible=e},expression:"visible"}},[o.visible?s("img",{staticStyle:{width:"100%"},attrs:{src:o.imgName}}):o._e()])],2),o._v(" "),s("FormItem",{attrs:{label:"二货名称",prop:"goods_name"}},[s("Input",{attrs:{placeholder:"输入二货名称"},model:{value:o.goods.goods_name,callback:function(e){o.$set(o.goods,"goods_name",e)},expression:"goods.goods_name"}})],1),o._v(" "),s("FormItem",{attrs:{label:"原价",prop:"mail"}},[s("InputNumber",{attrs:{min:1},model:{value:o.goods.goods_oprice,callback:function(e){o.$set(o.goods,"goods_oprice",e)},expression:"goods.goods_oprice"}})],1),o._v(" "),s("FormItem",{attrs:{label:"现价",prop:"mail"}},[s("InputNumber",{attrs:{min:1},model:{value:o.goods.goods_nprice,callback:function(e){o.$set(o.goods,"goods_nprice",e)},expression:"goods.goods_nprice"}})],1),o._v(" "),s("FormItem",{attrs:{label:"二货分类",prop:"goods_cid"}},[s("Select",{attrs:{placeholder:"选择二货分类"},model:{value:o.goods.goods_cid,callback:function(e){o.$set(o.goods,"goods_cid",e)},expression:"goods.goods_cid"}},o._l(o.classify,function(e,t){return s("Option",{key:t,attrs:{value:e.gclassify_id}},[o._v(o._s(e.gclassify_name))])}))],1),o._v(" "),s("FormItem",{attrs:{label:"交易方式",prop:"goods_type"}},[s("RadioGroup",{model:{value:o.goods.goods_type,callback:function(e){o.$set(o.goods,"goods_type",e)},expression:"goods.goods_type"}},[s("Radio",{attrs:{label:1}},[o._v("送货上门")]),o._v(" "),s("Radio",{attrs:{label:2}},[o._v("自提")]),o._v(" "),s("Radio",{attrs:{label:0}},[o._v("送货上门/自提")])],1)],1),o._v(" "),s("FormItem",{directives:[{name:"show",rawName:"v-show",value:1!=o.goods.goods_type,expression:"goods.goods_type!=1"}],attrs:{label:"交易地址",prop:"name"}},[s("Input",{attrs:{placeholder:"交易地址"},model:{value:o.goods.goods_address,callback:function(e){o.$set(o.goods,"goods_address",e)},expression:"goods.goods_address"}})],1),o._v(" "),s("FormItem",{attrs:{label:"联系方式",prop:"phone"}},[s("Input",{attrs:{placeholder:"手机号码"},model:{value:o.goods.phone,callback:function(e){o.$set(o.goods,"phone",e)},expression:"goods.phone"}})],1),o._v(" "),s("FormItem",{attrs:{label:"QQ",prop:"qq"}},[s("Input",{attrs:{placeholder:"QQ号码"},model:{value:o.goods.qq,callback:function(e){o.$set(o.goods,"qq",e)},expression:"goods.qq"}})],1),o._v(" "),s("FormItem",{attrs:{label:"微信",prop:"wechat"}},[s("Input",{attrs:{placeholder:"微信号"},model:{value:o.goods.wechat,callback:function(e){o.$set(o.goods,"wechat",e)},expression:"goods.wechat"}})],1),o._v(" "),s("FormItem",{attrs:{label:"详情",prop:"goods_summary"}},[s("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"输入详情"},model:{value:o.goods.goods_summary,callback:function(e){o.$set(o.goods,"goods_summary",e)},expression:"goods.goods_summary"}})],1),o._v(" "),s("FormItem",[o.gid?s("Button",{attrs:{type:"primary"},on:{click:function(e){o.edit_goods("goods")}}},[o._v("确认修改")]):s("Button",{attrs:{type:"primary"},on:{click:function(e){o.handleSubmit("goods")}}},[o._v("确认发布")])],1)],1)],1)],1)},a=[];t._withStripped=!0;var i={render:t,staticRenderFns:a};e.a=i},53:function(o,e,s){"use strict";function t(o){r||s(218)}Object.defineProperty(e,"__esModule",{value:!0});var a=s(184),i=s(219),r=!1,d=s(0),n=t,l=d(a.a,i.a,!1,n,"data-v-59505b7e",null);l.options.__file="src\\views\\publish\\index.vue",e.default=l.exports}});