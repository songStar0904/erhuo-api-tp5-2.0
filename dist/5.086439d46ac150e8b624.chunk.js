webpackJsonp([5],{145:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=e(196),i=e(256),n=e(0),o=n(a.a,i.a,!1,null,null,null);o.options.__file="src\\views\\dynamic\\index.vue",s.default=o.exports},146:function(t,s,e){"use strict";var a=e(3);s.a={props:["info"],components:{userInfo:a.k,breadcrumbNav:a.a},computed:{title:function(){return this.$route.meta.title}}}},148:function(t,s,e){"use strict";var a=e(146),i=e(149),n=e(0),o=n(a.a,i.a,!1,null,null,null);o.options.__file="src\\views\\layout\\layout.vue",s.a=o.exports},149:function(t,s,e){"use strict";var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"box"},[e("Row",{attrs:{gutter:40}},[e("Col",{attrs:{span:"7"}},[e("Card",{staticClass:"mb30",attrs:{"dis-hover":!0}},[t.info?e("user-info",{attrs:{info:t.info}},[e("div",{attrs:{slot:"userInfo"},slot:"userInfo"},[t._t("leftInfo")],2)]):t._e()],1),t._v(" "),e("Card",{attrs:{"dis-hover":!0}},[t._t("leftMeau")],2),t._v(" "),t._t("leftBottom")],2),t._v(" "),e("Col",{attrs:{span:"17"}},[e("Card",{staticClass:"mb20",attrs:{"dis-hover":!0}},[e("breadcrumb-nav")],1),t._v(" "),e("Card",{attrs:{padding:0,"dis-hover":!0}},[t._t("rightMeau"),t._v(" "),e("transition",{attrs:{name:"slide-fade"}},[e("router-view",{staticStyle:{padding:"30px"}})],1)],2)],1)],1)],1)},i=[];a._withStripped=!0;var n={render:a,staticRenderFns:i};s.a=n},156:function(t,s,e){"use strict";var a=e(3);s.a={components:{delModal:a.b},props:["data","isOwn"],data:function(){return{}},methods:{follow:function(t){var s=this;this.$fetch.goods.follow({followers_id:t}).then(function(t){200===t.code?s.data.is_fans=t.data:s.$Message.error(t.msg)})},onClick:function(t){0===t?this.$refs.del.openModal():1===t&&this.sold_goods()},del_goods:function(){var t=this;this.$fetch.goods.del({goods_id:this.data.goods_id}).then(function(s){200===s.code?(t.$refs.del.closeModal(),t.$Message.success(s.msg),t.$emit("getGoods")):t.$Message.error(s.msg)})},sold_goods:function(){var t=this;this.$fetch.user.sold_goods({goods_id:this.data.goods_id}).then(function(s){200===s.code?(t.$Message.success(s.msg),t.$emit("getGoods")):t.$Message.error(s.msg)})}},computed:{uid:function(){if(this.$store.state.user.info)return this.$store.state.user.info.user_id}}}},157:function(t,s,e){"use strict";function a(t){o||e(170)}var i=e(156),n=e(171),o=!1,r=e(0),d=a,c=r(i.a,n.a,!1,d,"data-v-933cd5ca",null);c.options.__file="src\\views\\main-components\\goods-uitem.vue",s.a=c.exports},170:function(t,s){},171:function(t,s,e){"use strict";var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("Card",{attrs:{"dis-hover":!0}},[e("Row",{attrs:{gutter:16}},[e("Col",{attrs:{span:"8"}},[e("img",{staticStyle:{width:"145px",height:"145px"},attrs:{src:t.data.goods_icon[0].url,alt:t.data.goods_name}}),t._v(" "),e("div",{staticClass:"tag"},[1===t.data.goods_spread?e("Tag",{attrs:{color:"red"}},[t._v("精品")]):t._e(),t._v(" "),3===t.data.goods_status?e("Tag",{attrs:{color:"gray"}},[t._v("已出")]):t._e(),t._v(" "),0===t.data.goods_sell?e("Tag",{attrs:{color:"orange"}},[t._v("求购")]):t._e()],1)]),t._v(" "),e("Col",{attrs:{span:"16"}},[e("div",{staticClass:"clearfix goods_info"},[e("router-link",{staticClass:"fl",attrs:{to:{name:"goods",params:{gid:t.data.goods_id}},target:"_blank"}},[e("h3",{staticClass:"goods_name text-success"},[t._v(t._s(t.data.goods_name))])]),t._v(" "),t.data.user.id==t.uid?e("Dropdown",{staticClass:"more fr",attrs:{trigger:"click"},on:{"on-click":t.onClick}},[e("a",{attrs:{href:"javascript:void(0)"}},[e("Icon",{staticStyle:{"font-size":"20px"},attrs:{type:"ios-more"}})],1),t._v(" "),e("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[e("DropdownItem",{attrs:{name:0}},[t._v("删除")]),t._v(" "),2===t.data.goods_status?e("DropdownItem",{attrs:{name:1}},[t._v("下架")]):t._e()],1)],1):t._e()],1),t._v(" "),e("Row",{staticClass:"mt10"},[e("Col",{attrs:{span:"5"}},[e("p",[t._v("分类：")])]),t._v(" "),e("Col",{attrs:{span:"6"}},[e("p",[t._v(t._s(t.data.gclassify.name))])])],1),t._v(" "),e("Row",{staticClass:"mt10"},[e("Col",{attrs:{span:"5"}},[e("p",[t._v("现价：")])]),t._v(" "),e("Col",{attrs:{span:"6"}},[e("p",[t._v("￥"+t._s(t.data.goods_nprice)+" 元")])]),t._v(" "),e("Col",{attrs:{span:"5"}},[t._v("原价：")]),t._v(" "),e("Col",{staticClass:"oprice",attrs:{span:"6"}},[t._v("￥"+t._s(t.data.goods_oprice)+" 元")])],1),t._v(" "),e("div",{staticClass:"mt15"},[e("Button",{staticClass:"mr30",attrs:{icon:"heart",type:t.data.is_fans?"warning":"ghost"},on:{click:function(s){t.follow(t.data.goods_id)}}},[t._v(t._s(t.data.is_fans?"已":"")+"收藏")]),t._v(" "),t.isOwn?e("router-link",{attrs:{to:{name:"gedit",params:{gid:t.data.goods_id}},target:"_blank"}},[e("Button",{staticClass:"w100",attrs:{icon:"compose",type:"success"}},[t._v("编辑")])],1):e("Button",{staticClass:"w100",attrs:{icon:"card",type:"success"}},[t._v("购买")])],1)],1)],1),t._v(" "),e("del-modal",{ref:"del",attrs:{type:1,id:t.data.goods_id},on:{delGoods:t.del_goods}})],1)},i=[];a._withStripped=!0;var n={render:a,staticRenderFns:i};s.a=n},196:function(t,s,e){"use strict";function a(t){if(Array.isArray(t)){for(var s=0,e=Array(t.length);s<t.length;s++)e[s]=t[s];return e}return Array.from(t)}var i=e(148),n=e(3),o=e(250);s.a={components:{layout:i.a,inputBox:n.e,dynamicItem:o.a,shareModal:n.i,delModal:n.b,reportModal:n.h},data:function(){return{content:"",data:[],page:1,num:5,type:0,noMore:!1,busy:!1,shareContent:"",dynamic_id:null}},mounted:function(){this.getData()},methods:{getData:function(){var t=this;console.log(this.page),this.busy=!0,this.$fetch.dynamic.get({type:this.type,num:this.num,page:this.page}).then(function(s){if(t.busy=!1,200===s.code)if(s.data.length>0){var e;(e=t.data).push.apply(e,a(s.data))}else t.noMore=!0;else t.$Message.error(s.msg)})},loadMore:function(){this.noMore||(this.page++,this.getData())},submit:function(t){var s=this;this.content=t,this.$fetch.dynamic.add({content:this.content,type:1}).then(function(t){200===t.code?(s.content="",s.$Message.success(t.msg),s.data.unshift(t.data)):s.$Message.error(t.msg)})},delDynamic:function(t){this.data=[],this.page=1,this.getData()},changeMeau:function(t){this.type=t},share:function(t){var s=this.data[t];this.dynamic_id=s.dynamic_id,this.shareContent="@"+s.user.name+": "+s.dynamic_content,console.log(this.$refs.share),this.$refs.share.openModal()},shareDynamic:function(){this.page=1,this.data=[],this.getData()},openModal:function(t,s){this.dynamic_id=s,this.$refs[t].openModal()}},computed:{user_info:function(){if(this.$store.state.user.info)return this.$store.state.user.info}},watch:{type:function(){this.noMore=!1,this.page=1,this.data=[],this.getData()}}}},197:function(t,s,e){"use strict";var a=e(3),i=e(52),n=e(157),o=e(252),r=e(4);s.a={props:["dynamic","index"],components:{myCard:a.f,commentBox:i.a,goodsUitem:n.a,dynamicRepost:o.a,userName:a.l},data:function(){return{isOpen:!1,comment:[],shareContent:""}},methods:{onClick:function(t){0==t?this.$emit("openModal","report",this.dynamic.dynamic_id,this.index):1==t&&this.$emit("openModal","del",this.dynamic.dynamic_id,this.index)},praise:function(){var t=this;this.$fetch.msg.praise({type:1,mid:this.dynamic.dynamic_id}).then(function(s){if(200===s.code){t.$Message.success(s.msg);var e=t.dynamic.is_praise?-1:1;t.dynamic.praise_num+=e,t.dynamic.is_praise=!t.dynamic.is_praise}else t.$Message.error(s.msg)})},share:function(){this.uid?this.$emit("share",this.index):this.$Message.error("请先登录")},openComment:function(){this.isOpen||this.getComment(),this.isOpen=!this.isOpen},getComment:function(){var t=this;this.$fetch.msg.get_by_id({type:"dynamic",gid:this.dynamic.dynamic_id}).then(function(s){200===s.code?t.comment=s.data:t.$Message.error(s.msg)})},replaceUser:function(t){return r.a.replaceUser(t)}},computed:{uid:function(){if(this.$store.state.user.info)return this.$store.state.user.info.user_id}}}},198:function(t,s,e){"use strict";var a=e(3),i=e(157);s.a={props:["dynamic"],components:{userName:a.l,goodsUitem:i.a},data:function(){return{}},methods:{},computed:{uid:function(){if(this.$store.state.user.info)return this.$store.state.user.info.user_id}}}},250:function(t,s,e){"use strict";function a(t){o||e(251)}var i=e(197),n=e(255),o=!1,r=e(0),d=a,c=r(i.a,n.a,!1,d,"data-v-6f6425eb",null);c.options.__file="src\\views\\dynamic\\dynamic-components\\dynamicItem.vue",s.a=c.exports},251:function(t,s){},252:function(t,s,e){"use strict";function a(t){o||e(253)}var i=e(198),n=e(254),o=!1,r=e(0),d=a,c=r(i.a,n.a,!1,d,"data-v-6380702b",null);c.options.__file="src\\views\\dynamic\\dynamic-components\\dynamicRepost.vue",s.a=c.exports},253:function(t,s){},254:function(t,s,e){"use strict";var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("Card",{staticClass:"dynamic_repost",attrs:{"dis-hover":!0,padding:8}},[e("user-name",{attrs:{uid:t.dynamic.user.id}},[e("p",{staticClass:"text-success",attrs:{slot:"user"},slot:"user"},[t._v("@"+t._s(t.dynamic.user.name)+" :")])]),t._v(" "),e("p",{staticClass:"ptb5"},[t._v(t._s(t.dynamic.dynamic_content))]),t._v(" "),2===t.dynamic.dynamic_type?e("div",[e("goods-uitem",{attrs:{data:t.dynamic.goods,isOwn:t.uid===t.dynamic.user.id}})],1):t._e()],1)},i=[];a._withStripped=!0;var n={render:a,staticRenderFns:i};s.a=n},255:function(t,s,e){"use strict";var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("my-card",{attrs:{info:t.dynamic.user,time:t.dynamic.dynamic_time}},[e("div",{attrs:{slot:"more"},slot:"more"},[e("Dropdown",{staticClass:"more fr",attrs:{trigger:"click"},on:{"on-click":t.onClick}},[e("a",{attrs:{href:"javascript:void(0)"}},[e("Icon",{staticStyle:{"font-size":"20px"},attrs:{type:"ios-more"}})],1),t._v(" "),e("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[e("DropdownItem",{attrs:{name:"0"}},[t._v("举报")]),t._v(" "),t.uid===t.dynamic.user.id?e("DropdownItem",{attrs:{name:"1"}},[t._v("删除")]):t._e()],1)],1)],1),t._v(" "),e("div",{attrs:{slot:"content"},slot:"content"},[e("div",{staticClass:"ptb8"},[0===t.dynamic.dynamic_lid?e("span",[t._v("\n\t\t\t\t\t"+t._s(t.dynamic.dynamic_content)+"\n\t\t\t\t")]):t._l(t.replaceUser(t.dynamic.dynamic_content),function(s,a){return e("span",[s.user?e("user-name",{attrs:{uid:s.user}},[e("span",{staticClass:"text-success",attrs:{slot:"user"},slot:"user"},[t._v(" @"+t._s(s.user)+": ")])]):t._e(),t._v("\n\t\t\t\t\t"+t._s(s.content)+"\n\t\t\t\t")],1)})],2),t._v(" "),2===t.dynamic.dynamic_type&&t.dynamic.goods?e("div",[e("goods-uitem",{attrs:{data:t.dynamic.goods,isOwn:t.uid===t.dynamic.goods.user.id}})],1):t._e(),t._v(" "),0!==t.dynamic.dynamic_lid?e("div",[e("dynamic-repost",{attrs:{dynamic:t.dynamic.children}})],1):t._e(),t._v(" "),e("div",{staticClass:"btn-box text-sub"},[e("div",{staticClass:"btn",on:{click:t.share}},[e("Icon",{staticClass:"mr5",attrs:{type:"ios-undo-outline",size:"16"}}),t.dynamic.dynamic_share>0?e("span",[t._v(t._s(t.dynamic.dynamic_share))]):e("span",[t._v("分享")])],1),t._v(" "),e("div",{staticClass:"btn",class:{"text-success":t.isOpen},on:{click:t.openComment}},[e("Icon",{staticClass:"mr5",attrs:{type:"ios-chatbubble-outline",size:"16"}}),t.dynamic.comment_num>0?e("span",[t._v(t._s(t.dynamic.comment_num))]):e("span",[t._v("评论")])],1),t._v(" "),e("div",{staticClass:"btn",class:{"text-error":t.dynamic.is_praise},on:{click:t.praise}},[e("Icon",{staticClass:"mr5",attrs:{type:"thumbsup",size:"16"}}),t._v(" "),t.dynamic.praise_num>0?e("span",[t._v(t._s(t.dynamic.praise_num))]):e("span",[t._v("赞")])],1)]),t._v(" "),e("comment-box",{directives:[{name:"show",rawName:"v-show",value:t.isOpen,expression:"isOpen"}],attrs:{id:t.dynamic.dynamic_id,lid:0,rid:t.dynamic.user.id,type:"dynamic",data:this.comment}})],1)])],1)},i=[];a._withStripped=!0;var n={render:a,staticRenderFns:i};s.a=n},256:function(t,s,e){"use strict";var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("layout",{attrs:{info:t.user_info}},[t.user_info?e("div",{staticStyle:{"font-size":"14px"},attrs:{slot:"leftInfo"},slot:"leftInfo"},[e("p",[t._v(t._s(t.user_info.user_sex))]),t._v(" "),e("p",[t._v(t._s(t.user_info.user_sid))]),t._v(" "),e("span",{staticClass:"text-success btn"},[t._v("关注 ("+t._s(t.user_info.ship.fans_num)+")")]),t._v("    "),e("span",{staticClass:"text-success btn"},[t._v("粉丝 ("+t._s(t.user_info.ship.followers_num)+")")])]):e("div",{staticStyle:{"text-align":"center"},attrs:{slot:"leftMeau"},slot:"leftMeau"},[t._v("发表动态,请先登录")]),t._v(" "),e("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"}],staticStyle:{padding:"30px",height:"100%"},attrs:{slot:"rightMeau","infinite-scroll-disabled":t.busy,"infinite-scroll-distance":10},slot:"rightMeau"},[e("input-box",{staticClass:"mb20",attrs:{content:t.content,rows:4,placeholder:"有什么想和大家分享的？"},on:{submit:t.submit}}),t._v(" "),e("Menu",{staticStyle:{"margin-bottom":"20px"},attrs:{mode:"horizontal","active-name":t.type},on:{"on-select":t.changeMeau}},[e("MenuItem",{attrs:{name:0}},[t._v("\n\t\t            全部\n\t\t        ")]),t._v(" "),e("MenuItem",{attrs:{name:1}},[t._v("\n\t\t            文字\n\t\t        ")]),t._v(" "),e("MenuItem",{attrs:{name:2}},[t._v("\n\t\t            二货\n\t\t        ")]),t._v(" "),e("MenuItem",{attrs:{name:3}},[t._v("\n\t\t            关注\n\t\t        ")])],1),t._v(" "),e("transition-group",{attrs:{name:"slide-fade"}},t._l(t.data,function(s,a){return e("dynamic-item",{key:a,attrs:{dynamic:s,index:a},on:{share:t.share,openModal:t.openModal}})})),t._v(" "),e("div",{staticClass:"mt30"},[t.noMore?e("div",[e("Spin",[e("div",[t._v("已加载完成")])])],1):e("div",[e("Spin",[e("Icon",{staticClass:"demo-spin-icon-load",attrs:{type:"load-c",size:"18"}}),t._v(" "),e("div",[t._v("Loading")])],1)],1)])],1)]),t._v(" "),e("report-modal",{ref:"report",attrs:{type:3,id:t.dynamic_id}}),t._v(" "),e("del-modal",{ref:"del",attrs:{type:3,id:t.dynamic_id},on:{delDynamic:t.delDynamic}}),t._v(" "),e("share-modal",{ref:"share",attrs:{placeholder:t.shareContent,type:1,id:t.dynamic_id},on:{shareDynamic:t.shareDynamic}})],1)},i=[];a._withStripped=!0;var n={render:a,staticRenderFns:i};s.a=n}});